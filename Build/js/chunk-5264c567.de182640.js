(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5264c567"],{"7adb":function(t,e,s){"use strict";s("a394")},a394:function(t,e,s){},c9f7:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"boxraduis mt-3"},[e("div",[e("div",{staticClass:"row mt-1 p-3"},[e("div",{staticClass:"col-12 d-flex align-items-center mb-3 justify-content-between"},[e("h4",{staticClass:"p-0 m-0"},[t._v("ที่อยู่ของฉัน")]),e("button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-add",modifiers:{"modal-add":!0}}],staticClass:"btn btnDefault rounded-pill",on:{click:t.resetData}},[t._v(" + เพิ่มที่อยู่ ")])]),e("hr"),t._l(t.address,(function(s,i){return e("div",{key:i,staticClass:"row ms-2"},[e("div",{staticClass:"col-8"},[e("div",{staticClass:"row"},[t._m(0,!0),e("div",{staticClass:"col-9"},[e("p",[t._v(" "+t._s(s.name)+" "),1==s.status?e("span",{staticClass:"defaultAdd"},[t._v("ค่าเริ่มต้น")]):t._e()])])]),e("div",{staticClass:"row"},[t._m(1,!0),e("div",{staticClass:"col-9"},[e("p",[t._v(t._s(s.phone))])])]),e("div",{staticClass:"row"},[t._m(2,!0),e("div",{staticClass:"col-9"},[e("p",[t._v(" "+t._s(s.address)+" ")]),e("p",[t._v("ต. "+t._s(s.TambonName)+" อ. "+t._s(s.DistrictName))]),e("p",[t._v("จ. "+t._s(s.ProvinceThai)+" "+t._s(s.zipcode))])])])]),e("div",{staticClass:"col-4 text-end"},[e("div",{staticClass:"d-flex justify-content-end align-items-center"},[e("div",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-edit",modifiers:{"modal-edit":!0}}],staticClass:"line me-3",on:{click:function(e){return t.updateAdd(s.id_address)}}},[t._v(" แก้ไข ")])]),e("button",{staticClass:"btn btnDefault rounded-pill mt-2",attrs:{disabled:1==s.status},on:{click:function(e){return t.setAddress(s.id_address)}}},[t._v(" ตั้งเป็นค่าเริ่มต้น ")])]),e("hr",{staticClass:"mt-3"})])}))],2)]),e("b-modal",{ref:"my-modal-add",attrs:{id:"modal-add","hide-footer":"",centered:"",title:"ที่อยู่ใหม่",size:"lg"}},[e("form",{ref:"fromaddress",staticClass:"p-2",on:{submit:function(e){return e.preventDefault(),t.saveAddress.apply(null,arguments)}}},[e("div",{staticClass:"row mt-2"},[e("div",{staticClass:"col-6"},[e("Input",{attrs:{v:t.$v.form.name,inputname:"name",text:"ชื่อ-นามสกุล"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("div",{staticClass:"col-6"},[e("Input",{attrs:{v:t.$v.form.phone,inputname:"phone",text:"หมายเลขโทรศัพท์"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("Select",{attrs:{v:t.$v.form.province,inputname:"province",text:"จังหวัด",Data:t.Province},on:{input:t.getDistrict,reset1:t.resetDistrictAndTombon},model:{value:t.form.province,callback:function(e){t.$set(t.form,"province",e)},expression:"form.province"}})],1),e("div",{staticClass:"col-6"},[e("Select",{attrs:{v:t.$v.form.district,inputname:"district",text:"อำเภอ",Data:t.District},on:{input:t.getTombon,reset1:t.resetTombon},model:{value:t.form.district,callback:function(e){t.$set(t.form,"district",e)},expression:"form.district"}})],1),e("div",{staticClass:"col-6"},[e("Select",{attrs:{v:t.$v.form.tombon,inputname:"tombon",text:"ตำบล",Data:t.Tombon},on:{input:function(e){return t.getZipcode(t.form.tombon)}},model:{value:t.form.tombon,callback:function(e){t.$set(t.form,"tombon",e)},expression:"form.tombon"}})],1),e("div",{staticClass:"col-6"},[e("Input",{attrs:{v:t.$v.form.zipcode,inputname:"zipcode",text:"รหัสไปรษณีย์"},model:{value:t.form.zipcode,callback:function(e){t.$set(t.form,"zipcode",e)},expression:"form.zipcode"}})],1)]),e("Input",{attrs:{v:t.$v.form.addressInput,inputname:"address",text:"รายละเอียดที่อยู่"},model:{value:t.form.addressInput,callback:function(e){t.$set(t.form,"addressInput",e)},expression:"form.addressInput"}}),e("div",{staticClass:"footer d-flex justify-content-end mt-5"},[e("button",{staticClass:"btn-outline-light btnReset me-2 rounded-pill",attrs:{type:"reset"},on:{click:function(e){return t.hideModal("add")}}},[t._v(" ยกเลิก ")]),e("button",{staticClass:"btnOk rounded-pill",attrs:{type:"submit"}},[t._v("ยืนยัน")])])],1)]),e("b-modal",{ref:"my-modal-edit",attrs:{id:"modal-edit","hide-footer":"",centered:"",title:"แก้ไขข้อมูลที่อยู่",size:"lg"}},[e("form",{ref:"fromEdit",staticClass:"p-2",on:{submit:function(e){return e.preventDefault(),t.editAddress.apply(null,arguments)}}},[e("div",{staticClass:"row mt-2"},[e("div",{staticClass:"col-6"},[e("Input",{attrs:{v:t.$v.form.name,inputname:"name",text:"ชื่อ-นามสกุล"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("div",{staticClass:"col-6"},[e("Input",{attrs:{v:t.$v.form.phone,inputname:"phone",text:"หมายเลขโทรศัพท์"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("Select",{attrs:{v:t.$v.form.province,inputname:"province",text:"จังหวัด",Data:t.Province},on:{input:t.getDistrict,reset1:t.resetDistrictAndTombon},model:{value:t.form.province,callback:function(e){t.$set(t.form,"province",e)},expression:"form.province"}})],1),e("div",{staticClass:"col-6"},[e("Select",{attrs:{v:t.$v.form.district,inputname:"district",text:"อำเภอ",Data:t.District},on:{input:t.getTombon,reset1:t.resetTombon},model:{value:t.form.district,callback:function(e){t.$set(t.form,"district",e)},expression:"form.district"}})],1),e("div",{staticClass:"col-6"},[e("Select",{attrs:{v:t.$v.form.tombon,inputname:"tombon",text:"ตำบล",Data:t.Tombon},on:{input:function(e){return t.getZipcode(t.form.tombon)}},model:{value:t.form.tombon,callback:function(e){t.$set(t.form,"tombon",e)},expression:"form.tombon"}})],1),e("div",{staticClass:"col-6"},[e("Input",{attrs:{v:t.$v.form.zipcode,inputname:"zipcode",text:"รหัสไปรษณีย์"},model:{value:t.form.zipcode,callback:function(e){t.$set(t.form,"zipcode",e)},expression:"form.zipcode"}})],1)]),e("Input",{attrs:{v:t.$v.form.addressInput,inputname:"address",text:"รายละเอียดที่อยู่"},model:{value:t.form.addressInput,callback:function(e){t.$set(t.form,"addressInput",e)},expression:"form.addressInput"}}),e("input",{attrs:{type:"hidden",name:"id_address"},domProps:{value:t.getEditData.id_address}}),e("div",{staticClass:"footer d-flex justify-content-end mt-5"},[e("button",{staticClass:"btn-outline-light btnReset me-2 rounded-pill",attrs:{type:"reset"},on:{click:function(e){return t.hideModal("edit")}}},[t._v(" ยกเลิก ")]),e("button",{staticClass:"btnOk rounded-pill",attrs:{type:"submit"}},[t._v("ยืนยัน")])])],1)])],1)},o=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-3"},[e("span",[t._v("ชื่อ - สกุล")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-3"},[e("span",[t._v("โทรศัพท์ ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-3"},[e("span",[t._v("ที่อยู่ ")])])}],n=s("bc3a"),r=s.n(n),a=s("b5ae"),d=s("f4e5"),c=s("45b1"),l={name:"Address",components:{Input:d["a"],Select:c["a"]},data(){return{address:[],getEditData:[],Province:[],District:[],Tombon:[],form:{name:null,phone:null,province:null,district:null,tombon:null,zipcode:null,addressInput:null}}},validations:{form:{name:{required:a["required"],minLength:Object(a["minLength"])(2)},phone:{required:a["required"],minLength:Object(a["minLength"])(8)},province:{required:a["required"]},district:{required:a["required"]},tombon:{required:a["required"]},zipcode:{required:a["required"],minLength:Object(a["minLength"])(5)},addressInput:{required:a["required"],minLength:Object(a["minLength"])(1)}}},methods:{getProvince(){r.a.post(this.$URL+"/User/selectAddress.php",{action:"getProvince"}).then(t=>{this.Province=t.data})},getDistrict(){r.a.post(this.$URL+"/User/selectAddress.php",{action:"getDistrict",ProvinceID:this.form.province}).then(t=>{this.District=t.data})},getTombon(){r.a.post(this.$URL+"/User/selectAddress.php",{action:"getTombon",DistrictID:this.form.district}).then(t=>{this.Tombon=t.data})},getZipcode(t){const e=this.Tombon.filter(e=>e[0]==t);this.form.zipcode=e[0][3]},resetDistrictAndTombon(){this.form.district=null,this.form.tombon=null,this.form.zipcode=null,this.District=null,this.Tombon=null},resetTombon(){this.form.tombon=null,this.form.zipcode=null,this.Tombon=null},saveAddress(){if(this.$v.$touch(),this.$v.$invalid)console.log("Error");else{const t=new FormData(this.$refs["fromaddress"]);for(let e in t.entries())t.append(e,t[e]);t.append("id_member",this.$session.get("id_member")),t.append("action","saveAddress"),r.a.post(this.$URL+"/User/address.php",t).then(()=>{this.hideModal("add"),this.alert1("success","เพิ่มข้อมูลเรียบร้อยแล้ว"),this.getaddress(),this.resetData()})}},editAddress(){if(this.$v.$touch(),this.$v.$invalid)console.log("Error");else{const t=new FormData(this.$refs["fromEdit"]);for(let e in t.entries())t.append(e,t[e]);t.append("action","editAddress"),r.a.post(this.$URL+"/User/address.php",t).then(()=>{this.hideModal("edit"),this.alert1("success","แก้ไขข้อมูลเรียบร้อยแล้ว"),this.getaddress()})}},getaddress(){r.a.post(this.$URL+"/User/address.php",{id_member:this.$session.get("id_member"),action:"getAddress"}).then(t=>{this.address=t.data})},hideModal(t){this.$refs["my-modal-"+t].hide(),this.resetData()},alert1(t,e){this.$swal({position:"center",icon:""+t,title:""+e,showConfirmButton:!1,timer:1500})},deleteAdd(t){this.$swal({icon:"error",title:"ยืนยันการลบ",showCancelButton:!0,confirmButtonText:"ตกลง",confirmButtonColor:"#EB4247",cancelButtonText:"ยกเลิก",cancelButtonColor:"#1C9E3F"}).then(e=>{e.isConfirmed&&r.a.post(this.$URL+"/User/address.php",{id_address:t,action:"deleteAdd"}).then(()=>{this.alert1("success","ลบข้อมูลเรียบร้อยแล้ว"),this.getaddress()})})},getEdit(t){r.a.post(this.$URL+"/User/address.php",{id_address:t,action:"getEdit"}).then(t=>{this.getEditData=t.data,this.form.name=t.data.name,this.form.phone=t.data.phone,this.form.province=t.data.province,this.form.district=t.data.district,this.form.tombon=t.data.tombon,this.form.zipcode=t.data.zipcode,this.form.addressInput=t.data.address,this.getDistrict(),this.getTombon()})},updateAdd(t){this.getEdit(t)},setAddress(t){r.a.post(this.$URL+"/User/address.php",{id_member:this.$session.get("id_member"),id_address:t,action:"setAddress"}).then(()=>{this.getaddress(),this.$emit("setAddress")})},resetData(){this.form.name=null,this.form.phone=null,this.form.province=null,this.form.district=null,this.form.tombon=null,this.form.zipcode=null,this.form.addressInput=null,this.$v.$reset()}},created(){this.getaddress(),this.getProvince(),this.$root.$emit("Address"),document.title="Pepensuda Shop Profile"}},m=l,u=(s("7adb"),s("2877")),p=Object(u["a"])(m,i,o,!1,null,"7ee78d83",null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-5264c567.de182640.js.map