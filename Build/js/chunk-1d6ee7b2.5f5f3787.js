(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d6ee7b2"],{"035f":function(t,e,i){t.exports=i.p+"img/cartBank.d6e9255e.png"},"04c4":function(t,e,i){},"0666":function(t,e,i){},"0eb6":function(t,e,i){},1639:function(t,e,i){"use strict";i("0666")},"16af":function(t,e,i){"use strict";i("04c4")},3032:function(t,e,i){"use strict";i("0eb6")},ce42:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("div",[e("Topic"),e("div",{staticClass:"col-10 mx-auto"},[null==t.cartList[0]?e("div",{staticClass:"mt-3 p-5 bg-white d-flex flex-column justify-content-center align-items-center boxnone"},[e("img",{attrs:{src:i("035f"),alt:"",width:"150px"}}),e("h5",{staticClass:"mt-3"},[t._v("ไม่พบสินค้าในตะกร้า...")]),e("router-link",{staticClass:"mt-3",attrs:{to:"/"}},[e("button",{staticClass:"btnCart rounded-pill"},[t._v("ช้อปปิ้งกันเลย")])])],1):t._e(),t.cartList[0]?e("div",{staticClass:"row mt-4 position-relative"},[e("div",{staticClass:"col-8"},[e("CartList",{attrs:{data:t.cartList},on:{updateCart:t.getCart}})],1),e("div",{staticClass:"col-3 ms-auto"},[e("OrderCart",{attrs:{data:t.totalCart,cartList:t.cartList},on:{updateCart:t.getCart}})],1)]):t._e()])],1)},a=[],r=function(){var t=this;t._self._c;return t._m(0)},c=[function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"topic container-fluid d-flex align-items-center"},[e("div",{staticClass:"boxtopic d-flex align-items-center justify-content-between"},[e("div",{staticClass:"boximg"},[e("img",{attrs:{src:i("d266"),alt:""}})]),e("div",{staticClass:"line"}),e("div",{staticClass:"textTopic"},[t._v("รถเข็นสินค้าของฉัน")])])])])}],n={name:"Topic",props:{Profile:String},methods:{}},o=n,l=(i("16af"),i("2877")),d=Object(l["a"])(o,r,c,!1,null,"38212a4a",null),u=d.exports,m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"min-vh-100"},[t._m(0),t._l(t.data,(function(i,s){return e("div",{key:s,staticClass:"row bg-white my-1 border py-2 boxraduis"},[e("div",{staticClass:"col-6 d-flex align-items-center",class:[i.productNum<i.Total?"checkProduct ":""]},[e("div",[e("img",{attrs:{src:`${t.$URL}/imgProduct/${i.img_product}`,alt:"",width:"100px"}})]),e("div",[e("p",{staticClass:"ps-3"},[t._v(" "+t._s(i.productName)+" ")]),i.productNum<i.Total?e("p",{staticClass:"btnCart rounded-pill text-center"},[t._v(" สินค้าหมด ")]):t._e()])]),e("div",{staticClass:"col-2 text-center d-flex justify-content-center align-items-center",class:[i.productNum<i.Total?"checkProduct ":""]},[t._v(" ฿ "+t._s(t._f("numFormat")(i.productPrice))+" ")]),e("div",{staticClass:"col-2 d-flex justify-content-center align-items-center",class:[i.productNum<i.Total?"checkProduct ":""]},[e("div",{staticClass:"row"},[e("div",{staticClass:"boxnum d-flex align-items-center"},[e("button",{attrs:{disabled:!1},on:{click:function(e){return t.del(s)}}},[e("i",{staticClass:"fas fa-minus"})]),e("input",{ref:"input_"+s,refInFor:!0,attrs:{type:"number",readonly:""},domProps:{value:i.Total}}),e("input",{ref:"id_"+s,refInFor:!0,attrs:{type:"hidden"},domProps:{value:i.id_product}}),e("input",{ref:"idCart_"+s,refInFor:!0,attrs:{type:"hidden"},domProps:{value:i.id_cart}}),e("button",{on:{click:function(e){return t.add(s)}}},[e("i",{staticClass:"fas fa-plus"})])])])]),e("div",{staticClass:"col-2 position-relative d-flex align-items-center justify-content-center"},[e("p",{staticClass:"text-center p-0 m-0",class:[i.productNum<i.Total?"checkProduct ":""]},[t._v(" ฿ "),e("animated-number",{attrs:{value:i.productPrice*i.Total,formatValue:t.formatToPrice,duration:500}})],1),e("p",{staticClass:"btnDelete",on:{click:function(e){return t.deleteProduct(s)}}},[e("i",{staticClass:"fas fa-trash-alt"})])])])})),e("pre")],2)},p=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"row bg-white py-3 border boxraduis"},[e("div",{staticClass:"col-6 d-flex align-items-center justify-content-start"},[e("h2",{staticClass:"p-0 m-0"},[t._v("รายการสินค้า")])]),e("div",{staticClass:"col-2 text-center boxMenu"},[t._v("ราคา")]),e("div",{staticClass:"col-2 text-center boxMenu"},[t._v("จำนวน")]),e("div",{staticClass:"col-2 text-center boxMenu"},[t._v("ยอดรวมสินค้า")])])}],f=i("044d"),h=i.n(f),C=i("bc3a"),v=i.n(C),_={name:"CartList",props:{data:Array},components:{AnimatedNumber:h.a},data(){return{id_member:this.$session.get("id_member")}},methods:{del(t){let e=this.$refs["input_"+t];if(1!=e[0].value){e[0].value--;let i=this.$refs["id_"+t],s=this.$refs["idCart_"+t];v.a.post(this.$URL+"/User/cart.php",{action:"updateCartDel",qty:1,id:i[0].value,idCart:s[0].value,id_member:this.id_member}).then(()=>{this.$emit("updateCart")})}},add(t){let e=this.$refs["input_"+t];if(e[0].value==this.data[t].productNum)this.$swal({icon:"error",title:"สินค้ามีจำนวนไม่พอ",showCancelButton:!1,showConfirmButton:!1,timer:1500});else{e[0].value++;let i=this.$refs["id_"+t],s=this.$refs["idCart_"+t];v.a.post(this.$URL+"/User/cart.php",{action:"updateCartPlus",qty:1,id:i[0].value,idCart:s[0].value,id_member:this.id_member}).then(()=>{this.$emit("updateCart")})}},deleteProduct(t){let e=this.$refs["id_"+t],i=this.$refs["input_"+t];this.$swal({icon:"error",title:"ยืนยันการลบ",showCancelButton:!0,confirmButtonText:"ตกลง",confirmButtonColor:"#EB4247",cancelButtonText:"ยกเลิก",cancelButtonColor:"#1C9E3F"}).then(t=>{t.isConfirmed&&v.a.post(this.$URL+"/User/cart.php",{action:"deleteProduct",id:e[0].value,id_member:this.id_member,qty:i[0].value}).then(()=>{this.$emit("updateCart"),this.$root.$emit("getCount")})})},formatToPrice(t){var e=""+t.toFixed(),i=(new Intl.NumberFormat).format(e);return i}}},b=_,x=(i("3032"),Object(l["a"])(b,m,p,!1,null,"2da959c6",null)),g=x.exports,$=function(){var t=this,e=t._self._c;return e("div",{staticClass:"boxfixed"},[e("div",{staticClass:"row bg-white border p-3 ms-3 boxraduis"},[e("h2",[t._v("สรุปใบสั่งซื้อ")]),e("div",{staticClass:"d-flex justify-content-between align-items-center"},[e("h4",{staticClass:"p-0 m-0"},[t._v("ยอดรวมสินค้า")]),e("div",{staticClass:"text-price p-0 m-0"},[t._v(" ฿ "),e("animated-number",{staticClass:"text-price p-0 m-0",attrs:{value:t.data,formatValue:t.formatToPrice,duration:500}})],1)]),e("button",{staticClass:"btnCart rounded-pill mx-auto mt-5",on:{click:t.checkProduct}},[t._v(" ดำเนินการสั่งซื้อสินค้า ")])])])},w=[],P=(i("14d9"),{name:"OrderCart",props:{data:Number,cartList:Array},components:{AnimatedNumber:h.a},data(){return{id_user:this.$session.get("id_member")}},methods:{checkProduct(){v.a.post(this.$URL+"/User/cart.php",{action:"checkProduct",id_user:this.id_user}).then(t=>{this.deliverPrice>=20?this.$swal({icon:"error",title:"น้ำหนักสินค้าเกิน",text:"กรุณาสั่งแยกบิล",showCancelButton:!1,confirmButtonText:"ตกลง",confirmButtonColor:"#EB4247"}).then(()=>{this.$emit("updateCart")}):"success"==t.data?this.$router.push("/ConfirmOrder"):this.$swal({icon:"error",title:"จำนวนสินค้าไม่เพียงพอ",showCancelButton:!1,confirmButtonText:"ตกลง",confirmButtonColor:"#EB4247"}).then(()=>{this.$emit("updateCart")})})},formatToPrice(t){var e=""+t.toFixed(),i=(new Intl.NumberFormat).format(e);return i}},computed:{deliverPrice(){let t=0;this.cartList.map(e=>t+=e.qty*e.productWeigth);let e=t/1e3;return e}}}),T=P,y=(i("f1dd"),Object(l["a"])(T,$,w,!1,null,"32f6d574",null)),L=y.exports,k={name:"CartMe",components:{Topic:u,CartList:g,OrderCart:L},data(){return{cartList:[],id_member:this.$session.get("id_member"),totalCart:0}},methods:{getCart(){v.a.post(this.$URL+"/User/cart.php",{action:"getCart",id_member:this.id_member}).then(t=>{this.cartList=t.data,this.sumTotal()})},sumTotal(){var t=0;return this.cartList.forEach(e=>{t+=e.productPrice*e.Total}),this.totalCart=t}},created(){this.getCart(),document.title="Pepensuda Shop Cart"}},B=k,N=(i("1639"),Object(l["a"])(B,s,a,!1,null,"029bb7fd",null));e["default"]=N.exports},d266:function(t,e,i){t.exports=i.p+"img/cart.3840919b.png"},e40b:function(t,e,i){},f1dd:function(t,e,i){"use strict";i("e40b")}}]);
//# sourceMappingURL=chunk-1d6ee7b2.5f5f3787.js.map