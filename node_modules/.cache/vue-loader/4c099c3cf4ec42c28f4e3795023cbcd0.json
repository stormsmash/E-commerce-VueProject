{"remainingRequest":"F:\\project\\vue project\\project_it\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\project\\vue project\\project_it\\src\\components\\cart\\CartList.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\project\\vue project\\project_it\\src\\components\\cart\\CartList.vue","mtime":1659523160000},{"path":"F:\\project\\vue project\\project_it\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1723791156500},{"path":"F:\\project\\vue project\\project_it\\node_modules\\babel-loader\\lib\\index.js","mtime":1723791157083},{"path":"F:\\project\\vue project\\project_it\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1723791156500},{"path":"F:\\project\\vue project\\project_it\\node_modules\\vue-loader\\lib\\index.js","mtime":1723791156488}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgQW5pbWF0ZWROdW1iZXIgZnJvbSAiYW5pbWF0ZWQtbnVtYmVyLXZ1ZSI7DQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiQ2FydExpc3QiLA0KICBwcm9wczogew0KICAgIGRhdGE6IEFycmF5LA0KICB9LA0KICBjb21wb25lbnRzOiB7DQogICAgQW5pbWF0ZWROdW1iZXIsDQogIH0sDQoNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgaWRfbWVtYmVyOiB0aGlzLiRzZXNzaW9uLmdldCgiaWRfbWVtYmVyIiksDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGRlbChpbmRleCkgew0KICAgICAgbGV0IGlucHV0ID0gdGhpcy4kcmVmc1siaW5wdXRfIiArIGAke2luZGV4fWBdOw0KDQogICAgICBpZiAoaW5wdXRbMF0udmFsdWUgPT0gMSkgew0KICAgICAgICByZXR1cm47DQogICAgICB9IGVsc2Ugew0KICAgICAgICBpbnB1dFswXS52YWx1ZS0tOw0KICAgICAgICBsZXQgaWQgPSB0aGlzLiRyZWZzWyJpZF8iICsgYCR7aW5kZXh9YF07DQogICAgICAgIGxldCBpZENhcnQgPSB0aGlzLiRyZWZzWyJpZENhcnRfIiArIGAke2luZGV4fWBdOw0KDQogICAgICAgIGF4aW9zDQogICAgICAgICAgLnBvc3QoYCR7dGhpcy4kVVJMfS9Vc2VyL2NhcnQucGhwYCwgew0KICAgICAgICAgICAgYWN0aW9uOiAidXBkYXRlQ2FydERlbCIsDQogICAgICAgICAgICBxdHk6IDEsDQogICAgICAgICAgICBpZDogaWRbMF0udmFsdWUsDQogICAgICAgICAgICBpZENhcnQ6IGlkQ2FydFswXS52YWx1ZSwNCiAgICAgICAgICAgIGlkX21lbWJlcjogdGhpcy5pZF9tZW1iZXIsDQogICAgICAgICAgfSkNCiAgICAgICAgICAudGhlbigoKSA9PiB7DQogICAgICAgICAgICB0aGlzLiRlbWl0KCJ1cGRhdGVDYXJ0Iik7DQogICAgICAgICAgfSk7DQogICAgICB9DQogICAgfSwNCiAgICBhZGQoaW5kZXgpIHsNCiAgICAgIGxldCBpbnB1dCA9IHRoaXMuJHJlZnNbImlucHV0XyIgKyBgJHtpbmRleH1gXTsNCiAgICAgIGlmIChpbnB1dFswXS52YWx1ZSA9PSB0aGlzLmRhdGFbaW5kZXhdLnByb2R1Y3ROdW0pIHsNCiAgICAgICAgdGhpcy4kc3dhbCh7DQogICAgICAgICAgaWNvbjogImVycm9yIiwNCiAgICAgICAgICB0aXRsZTogIuC4quC4tOC4meC4hOC5ieC4suC4oeC4teC4iOC4s+C4meC4p+C4meC5hOC4oeC5iOC4nuC4rSIsDQogICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogZmFsc2UsDQogICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLA0KICAgICAgICAgIHRpbWVyOiAxNTAwLA0KICAgICAgICB9KTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGlucHV0WzBdLnZhbHVlKys7DQogICAgICAgIGxldCBpZCA9IHRoaXMuJHJlZnNbImlkXyIgKyBgJHtpbmRleH1gXTsNCiAgICAgICAgbGV0IGlkQ2FydCA9IHRoaXMuJHJlZnNbImlkQ2FydF8iICsgYCR7aW5kZXh9YF07DQoNCiAgICAgICAgYXhpb3MNCiAgICAgICAgICAucG9zdChgJHt0aGlzLiRVUkx9L1VzZXIvY2FydC5waHBgLCB7DQogICAgICAgICAgICBhY3Rpb246ICJ1cGRhdGVDYXJ0UGx1cyIsDQogICAgICAgICAgICBxdHk6IDEsDQogICAgICAgICAgICBpZDogaWRbMF0udmFsdWUsDQogICAgICAgICAgICBpZENhcnQ6IGlkQ2FydFswXS52YWx1ZSwNCiAgICAgICAgICAgIGlkX21lbWJlcjogdGhpcy5pZF9tZW1iZXIsDQogICAgICAgICAgfSkNCiAgICAgICAgICAudGhlbigoKSA9PiB7DQogICAgICAgICAgICB0aGlzLiRlbWl0KCJ1cGRhdGVDYXJ0Iik7DQogICAgICAgICAgfSk7DQogICAgICB9DQogICAgfSwNCiAgICBkZWxldGVQcm9kdWN0KGluZGV4KSB7DQogICAgICBsZXQgaWQgPSB0aGlzLiRyZWZzWyJpZF8iICsgYCR7aW5kZXh9YF07DQogICAgICBsZXQgaW5wdXQgPSB0aGlzLiRyZWZzWyJpbnB1dF8iICsgYCR7aW5kZXh9YF07DQoNCiAgICAgIHRoaXMuJHN3YWwoew0KICAgICAgICBpY29uOiAiZXJyb3IiLA0KICAgICAgICB0aXRsZTogIuC4ouC4t+C4meC4ouC4seC4meC4geC4suC4o+C4peC4miIsDQogICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsDQogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi4LiV4LiB4Lil4LiHIiwNCiAgICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiAiI0VCNDI0NyIsDQogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLguKLguIHguYDguKXguLTguIEiLA0KICAgICAgICBjYW5jZWxCdXR0b25Db2xvcjogIiMxQzlFM0YiLA0KICAgICAgfSkudGhlbigocmVzdWx0KSA9PiB7DQogICAgICAgIGlmIChyZXN1bHQuaXNDb25maXJtZWQpIHsNCiAgICAgICAgICBheGlvcw0KICAgICAgICAgICAgLnBvc3QoYCR7dGhpcy4kVVJMfS9Vc2VyL2NhcnQucGhwYCwgew0KICAgICAgICAgICAgICBhY3Rpb246ICJkZWxldGVQcm9kdWN0IiwNCiAgICAgICAgICAgICAgaWQ6IGlkWzBdLnZhbHVlLA0KICAgICAgICAgICAgICBpZF9tZW1iZXI6IHRoaXMuaWRfbWVtYmVyLA0KICAgICAgICAgICAgICBxdHk6IGlucHV0WzBdLnZhbHVlLA0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgdGhpcy4kZW1pdCgidXBkYXRlQ2FydCIpOw0KICAgICAgICAgICAgICB0aGlzLiRyb290LiRlbWl0KCJnZXRDb3VudCIpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgZm9ybWF0VG9QcmljZSh2YWx1ZSkgew0KICAgICAgdmFyIG51bTEgPSBgJHt2YWx1ZS50b0ZpeGVkKCl9YDsNCiAgICAgIHZhciBudW1iZXIgPSBuZXcgSW50bC5OdW1iZXJGb3JtYXQoKS5mb3JtYXQobnVtMSk7DQogICAgICByZXR1cm4gbnVtYmVyOw0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["CartList.vue"],"names":[],"mappings":";AA+GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CartList.vue","sourceRoot":"src/components/cart","sourcesContent":["<template>\r\n  <div class=\"min-vh-100\">\r\n    <div class=\"row bg-white py-3 border boxraduis\">\r\n      <div class=\"col-6 d-flex align-items-center justify-content-start\">\r\n        <h2 class=\"p-0 m-0\">รายการสินค้า</h2>\r\n      </div>\r\n      <div class=\"col-2 text-center boxMenu\">ราคา</div>\r\n      <div class=\"col-2 text-center boxMenu\">จำนวน</div>\r\n      <div class=\"col-2 text-center boxMenu\">ยอดรวมสินค้า</div>\r\n    </div>\r\n    <div\r\n      v-for=\"(item, index) in data\"\r\n      :key=\"index\"\r\n      class=\"row bg-white my-1 border py-2 boxraduis\"\r\n    >\r\n      <div\r\n        class=\"col-6 d-flex align-items-center\"\r\n        :class=\"[item.productNum < item.Total ? 'checkProduct ' : '']\"\r\n      >\r\n        <div>\r\n          <img\r\n            :src=\"`${$URL}/imgProduct/${item.img_product}`\"\r\n            alt=\"\"\r\n            width=\"100px\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <p class=\"ps-3\">\r\n            {{ item.productName }}\r\n          </p>\r\n          <p\r\n            v-if=\"item.productNum < item.Total\"\r\n            class=\"btnCart rounded-pill text-center\"\r\n          >\r\n            สินค้าหมด\r\n          </p>\r\n        </div>\r\n      </div>\r\n      <div\r\n        class=\"\r\n          col-2\r\n          text-center\r\n          d-flex\r\n          justify-content-center\r\n          align-items-center\r\n        \"\r\n        :class=\"[item.productNum < item.Total ? 'checkProduct ' : '']\"\r\n      >\r\n        &#3647; {{ item.productPrice | numFormat }}\r\n      </div>\r\n      <div\r\n        class=\"col-2 d-flex justify-content-center align-items-center\"\r\n        :class=\"[item.productNum < item.Total ? 'checkProduct ' : '']\"\r\n      >\r\n        <div class=\"row\">\r\n          <div class=\"boxnum d-flex align-items-center\">\r\n            <button @click=\"del(index)\" :disabled=\"0 == 1\">\r\n              <i class=\"fas fa-minus\"></i>\r\n            </button>\r\n            <input\r\n              type=\"number\"\r\n              :value=\"item.Total\"\r\n              :ref=\"`input_${index}`\"\r\n              readonly\r\n            />\r\n            <input\r\n              type=\"hidden\"\r\n              :value=\"item.id_product\"\r\n              :ref=\"`id_${index}`\"\r\n            />\r\n            <input\r\n              type=\"hidden\"\r\n              :value=\"item.id_cart\"\r\n              :ref=\"`idCart_${index}`\"\r\n            />\r\n            <button @click=\"add(index)\">\r\n              <i class=\"fas fa-plus\"></i>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div\r\n        class=\"\r\n          col-2\r\n          position-relative\r\n          d-flex\r\n          align-items-center\r\n          justify-content-center\r\n        \"\r\n      >\r\n        <p\r\n          class=\"text-center p-0 m-0\"\r\n          :class=\"[item.productNum < item.Total ? 'checkProduct ' : '']\"\r\n        >\r\n          &#3647;\r\n          <animated-number\r\n            :value=\"item.productPrice * item.Total\"\r\n            :formatValue=\"formatToPrice\"\r\n            :duration=\"500\"\r\n          />\r\n        </p>\r\n        <p class=\"btnDelete\" @click=\"deleteProduct(index)\">\r\n          <i class=\"fas fa-trash-alt\"></i>\r\n        </p>\r\n      </div>\r\n    </div>\r\n    <pre></pre>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport AnimatedNumber from \"animated-number-vue\";\r\nimport axios from \"axios\";\r\nexport default {\r\n  name: \"CartList\",\r\n  props: {\r\n    data: Array,\r\n  },\r\n  components: {\r\n    AnimatedNumber,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      id_member: this.$session.get(\"id_member\"),\r\n    };\r\n  },\r\n  methods: {\r\n    del(index) {\r\n      let input = this.$refs[\"input_\" + `${index}`];\r\n\r\n      if (input[0].value == 1) {\r\n        return;\r\n      } else {\r\n        input[0].value--;\r\n        let id = this.$refs[\"id_\" + `${index}`];\r\n        let idCart = this.$refs[\"idCart_\" + `${index}`];\r\n\r\n        axios\r\n          .post(`${this.$URL}/User/cart.php`, {\r\n            action: \"updateCartDel\",\r\n            qty: 1,\r\n            id: id[0].value,\r\n            idCart: idCart[0].value,\r\n            id_member: this.id_member,\r\n          })\r\n          .then(() => {\r\n            this.$emit(\"updateCart\");\r\n          });\r\n      }\r\n    },\r\n    add(index) {\r\n      let input = this.$refs[\"input_\" + `${index}`];\r\n      if (input[0].value == this.data[index].productNum) {\r\n        this.$swal({\r\n          icon: \"error\",\r\n          title: \"สินค้ามีจำนวนไม่พอ\",\r\n          showCancelButton: false,\r\n          showConfirmButton: false,\r\n          timer: 1500,\r\n        });\r\n      } else {\r\n        input[0].value++;\r\n        let id = this.$refs[\"id_\" + `${index}`];\r\n        let idCart = this.$refs[\"idCart_\" + `${index}`];\r\n\r\n        axios\r\n          .post(`${this.$URL}/User/cart.php`, {\r\n            action: \"updateCartPlus\",\r\n            qty: 1,\r\n            id: id[0].value,\r\n            idCart: idCart[0].value,\r\n            id_member: this.id_member,\r\n          })\r\n          .then(() => {\r\n            this.$emit(\"updateCart\");\r\n          });\r\n      }\r\n    },\r\n    deleteProduct(index) {\r\n      let id = this.$refs[\"id_\" + `${index}`];\r\n      let input = this.$refs[\"input_\" + `${index}`];\r\n\r\n      this.$swal({\r\n        icon: \"error\",\r\n        title: \"ยืนยันการลบ\",\r\n        showCancelButton: true,\r\n        confirmButtonText: \"ตกลง\",\r\n        confirmButtonColor: \"#EB4247\",\r\n        cancelButtonText: \"ยกเลิก\",\r\n        cancelButtonColor: \"#1C9E3F\",\r\n      }).then((result) => {\r\n        if (result.isConfirmed) {\r\n          axios\r\n            .post(`${this.$URL}/User/cart.php`, {\r\n              action: \"deleteProduct\",\r\n              id: id[0].value,\r\n              id_member: this.id_member,\r\n              qty: input[0].value,\r\n            })\r\n            .then(() => {\r\n              this.$emit(\"updateCart\");\r\n              this.$root.$emit(\"getCount\");\r\n            });\r\n        }\r\n      });\r\n    },\r\n    formatToPrice(value) {\r\n      var num1 = `${value.toFixed()}`;\r\n      var number = new Intl.NumberFormat().format(num1);\r\n      return number;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nbutton {\r\n  background: none;\r\n  border: none;\r\n  border: 0.01rem solid #c5604e;\r\n  background-color: #c5604e;\r\n}\r\nbutton:focus,\r\nbutton:active {\r\n  outline: none;\r\n  box-shadow: none;\r\n}\r\n.boxnum {\r\n  border: none;\r\n}\r\n.boxnum button {\r\n  width: 2rem;\r\n  height: 2rem;\r\n  color: rgb(255, 255, 255);\r\n  /* border-radius: 5px; */\r\n}\r\n.boxnum input {\r\n  width: 4rem;\r\n  height: 2rem;\r\n  text-align: center;\r\n  font-size: 1.2rem;\r\n  border: 0.01rem solid #c5604e;\r\n  padding: 0;\r\n  margin: 0;\r\n  border-radius: 0;\r\n}\r\ninput::-webkit-outer-spin-button,\r\ninput::-webkit-inner-spin-button {\r\n  -webkit-appearance: none;\r\n  margin: 0;\r\n}\r\n.btnDelete {\r\n  font-size: 1.1rem;\r\n  color: #c5604e;\r\n  position: absolute;\r\n  right: 0;\r\n  bottom: -1.1rem;\r\n  padding-right: 1.1rem;\r\n  cursor: pointer;\r\n}\r\n.boxMenu {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-weight: bold;\r\n  font-size: 1.1rem;\r\n}\r\n.checkProduct {\r\n  filter: grayscale(100%);\r\n  opacity: 0.5;\r\n}\r\n.btnCart {\r\n  background-color: #c5604e;\r\n  border: none;\r\n  font-size: 1.1rem;\r\n  color: white;\r\n  padding: 0.01rem 0.5rem;\r\n  margin-left: 1rem;\r\n  width: 8rem;\r\n  height: 1.8rem;\r\n  border-radius: 1.1rem;\r\n}\r\n</style>\r\n"]}]}