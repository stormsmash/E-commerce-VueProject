{"remainingRequest":"F:\\project\\vue project\\project_it\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\project\\vue project\\project_it\\src\\components\\profile\\ProfileMe.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\project\\vue project\\project_it\\src\\components\\profile\\ProfileMe.vue","mtime":1661616379658},{"path":"F:\\project\\vue project\\project_it\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1723791156500},{"path":"F:\\project\\vue project\\project_it\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1723791156499},{"path":"F:\\project\\vue project\\project_it\\node_modules\\babel-loader\\lib\\index.js","mtime":1723791157083},{"path":"F:\\project\\vue project\\project_it\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1723791156500},{"path":"F:\\project\\vue project\\project_it\\node_modules\\vue-loader\\lib\\index.js","mtime":1723791156488}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgRGF0ZSBmcm9tICIuL0RhdGUudnVlIjsNCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJQcm9maWxlTWUiLA0KICBjb21wb25lbnRzOiB7IERhdGUgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgaWRfbWVtYmVyOiB0aGlzLiRzZXNzaW9uLmdldCgiaWRfbWVtYmVyIiksDQogICAgICBuYW1lOiAiIiwNCiAgICAgIGxhc3Q6ICIiLA0KICAgICAgZW1haWw6IHRoaXMuJHNlc3Npb24uZ2V0KCJlbWFpbCIpLA0KICAgICAgcGhvbmU6ICIiLA0KICAgICAgZ2VuZGVyOiAiIiwNCiAgICAgIGJpcnRoZGF5OiAiIiwNCiAgICAgIHVybDogIiIsDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIG9uRmlsZUNoYW5nZShlKSB7DQogICAgICBjb25zdCBmaWxlID0gZS50YXJnZXQuZmlsZXNbMF07DQogICAgICBjb25zdCB0eXBlSW1nID0gInxqcGd8cG5nfGpwZWciOw0KICAgICAgY29uc3QgdHlwZSA9IGZpbGUudHlwZS5zcGxpdCgiLyIpOw0KICAgICAgaWYgKGZpbGUgJiYgdHlwZUltZy5pbmRleE9mKHR5cGVbMV0pICE9PSAtMSkgew0KICAgICAgICB0aGlzLnVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSk7DQogICAgICAgIGNvbnNvbGUubG9nKCJTdWNjZXNzIik7DQogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuJHJlZnMuaW1nLnZhbHVlKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuJHN3YWwoew0KICAgICAgICAgIHBvc2l0aW9uOiAiY2VudGVyIiwNCiAgICAgICAgICBpY29uOiAiZXJyb3IiLA0KICAgICAgICAgIHRpdGxlOiAi4Lic4Li04LiU4Lic4Lil4Liy4LiUIiwNCiAgICAgICAgICB0ZXh0OiAi4Lij4Lit4LiH4Lij4Lix4Lia4LmE4Lif4Lil4LmMOiAuSlBFRywgLlBORyDguYDguJfguYjguLLguJnguLHguYnguJkiLA0KICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IGZhbHNlLA0KICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi4LiV4LiB4Lil4LiHIiwNCiAgICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6ICIjRUI0MjQ3IiwNCiAgICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgICAgdGhpcy4kcmVmcy5pbWcudmFsdWUgPSBudWxsOw0KICAgICAgICAgIHRoaXMuZ2V0RGF0YSgpOw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KDQogICAgZ2V0RGF5KGRhdGUpIHsNCiAgICAgIHRoaXMuYmlydGhkYXkgPSBkYXRlOw0KICAgIH0sDQogICAgc3VibWl0KCkgew0KICAgICAgYXhpb3MNCiAgICAgICAgLnBvc3QoYCR7dGhpcy4kVVJMfS9Vc2VyL21lbWJlci5waHBgLCB7DQogICAgICAgICAgYWN0aW9uOiAidXBkYXRlIiwNCiAgICAgICAgICBpZF9tZW1iZXI6IHRoaXMuaWRfbWVtYmVyLA0KICAgICAgICAgIGZpcnN0bmFtZTogdGhpcy5uYW1lLA0KICAgICAgICAgIGxhc3RuYW1lOiB0aGlzLmxhc3QsDQogICAgICAgICAgcGhvbmU6IHRoaXMucGhvbmUsDQogICAgICAgICAgZ2VuZGVyOiB0aGlzLmdlbmRlciwNCiAgICAgICAgICBiaXJ0aGRheTogdGhpcy5iaXJ0aGRheSwNCiAgICAgICAgfSkNCiAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgIHRoaXMuJHN3YWwoew0KICAgICAgICAgICAgcG9zaXRpb246ICJjZW50ZXIiLA0KICAgICAgICAgICAgaWNvbjogInN1Y2Nlc3MiLA0KICAgICAgICAgICAgdGl0bGU6ICLguK3guLHguJvguYDguJTguJXguILguYnguK3guKHguLnguKXguKrguLPguYDguKPguYfguIgiLA0KICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLA0KICAgICAgICAgICAgdGltZXI6IDE1MDAsDQogICAgICAgICAgfSk7DQogICAgICAgIH0pOw0KICAgICAgdGhpcy51cGxvYWRJbWcoKTsNCiAgICB9LA0KICAgIGdldERhdGEoKSB7DQogICAgICBheGlvcw0KICAgICAgICAucG9zdChgJHt0aGlzLiRVUkx9L1VzZXIvbWVtYmVyLnBocGAsIHsNCiAgICAgICAgICBhY3Rpb246ICJnZXREYXRhIiwNCiAgICAgICAgICBpZF9tZW1iZXI6IHRoaXMuaWRfbWVtYmVyLA0KICAgICAgICB9KQ0KICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgdGhpcy5uYW1lID0gcmVzLmRhdGEuZmlyc3RuYW1lOw0KICAgICAgICAgIHRoaXMubGFzdCA9IHJlcy5kYXRhLmxhc3RuYW1lOw0KICAgICAgICAgIHRoaXMucGhvbmUgPSByZXMuZGF0YS5waG9uZTsNCiAgICAgICAgICB0aGlzLmdlbmRlciA9IHJlcy5kYXRhLmdlbmRlcjsNCiAgICAgICAgICB0aGlzLmJpcnRoZGF5ID0gcmVzLmRhdGEuYmlydGhkYXk7DQogICAgICAgICAgdGhpcy51cmwgPSBgJHt0aGlzLiRVUkx9L2ltZy8ke3Jlcy5kYXRhLmltZ31gOw0KICAgICAgICAgIHRoaXMuJGVtaXQoImdldEltZyIsIGAke3RoaXMuJFVSTH0vaW1nLyR7cmVzLmRhdGEuaW1nfWApOw0KICAgICAgICAgIGlmICgNCiAgICAgICAgICAgIHRoaXMudXJsID09IGAke3RoaXMuJFVSTH0vaW1nL3VuZGVmaW5lZGAgfHwNCiAgICAgICAgICAgIHRoaXMudXJsID09IGAke3RoaXMuJFVSTH0vaW1nL251bGxgDQogICAgICAgICAgKSB7DQogICAgICAgICAgICB0aGlzLnVybCA9IGAke3RoaXMuJFVSTH0vaW1nL3ByZXZpZXcucG5nYDsNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy4kcm9vdC4kZW1pdCgiZ2V0SW1nIik7DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgdXBsb2FkSW1nKCkgew0KICAgICAgY29uc3QgZnJvbURhdGEgPSBuZXcgRm9ybURhdGEodGhpcy4kcmVmc1siZm9ybUltZyJdKTsNCiAgICAgIGZvciAobGV0IGtleSBpbiBmcm9tRGF0YS5lbnRyaWVzKCkpIHsNCiAgICAgICAgZnJvbURhdGEuYXBwZW5kKGtleSwgZnJvbURhdGFba2V5XSk7DQogICAgICB9DQogICAgICBmcm9tRGF0YS5hcHBlbmQoImlkX21lbWJlciIsIHRoaXMuJHNlc3Npb24uZ2V0KCJpZF9tZW1iZXIiKSk7DQogICAgICBmcm9tRGF0YS5hcHBlbmQoImFjdGlvbiIsICJ1cGxvYWRJbWciKTsNCg0KICAgICAgYXhpb3MNCiAgICAgICAgLnBvc3QoYCR7dGhpcy4kVVJMfS9Vc2VyL21lbWJlci5waHBgLCBmcm9tRGF0YSkNCiAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgIHRoaXMuZ2V0RGF0YSgpOw0KICAgICAgICAgIHRoaXMuJHJlZnMuaW1nLnZhbHVlID0gbnVsbDsNCiAgICAgICAgfSkNCiAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgIHRoaXMuJHJvb3QuJGVtaXQoInNldFByb2ZpbGUiKTsNCiAgICAgICAgfSk7DQogICAgfSwNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLmdldERhdGEoKTsNCiAgICB0aGlzLiRyb290LiRlbWl0KCJzZXRQcm9maWxlIik7DQogICAgdGhpcy4kcm9vdC4kZW1pdCgiUHJvZmlsZSIpOw0KICAgIGRvY3VtZW50LnRpdGxlID0gIlBlcGVuc3VkYSBTaG9wIFByb2ZpbGUiOw0KICB9LA0KfTsNCg=="},{"version":3,"sources":["ProfileMe.vue"],"names":[],"mappings":";AAkKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProfileMe.vue","sourceRoot":"src/components/profile","sourcesContent":["<template>\r\n  <div class=\"boxraduis mt-3\">\r\n    <div>\r\n      <div class=\"row mt-1 p-2\">\r\n        <h4>ข้อมูลของฉัน</h4>\r\n        <h6 class=\"mb-3\">\r\n          จัดการข้อมูลส่วนตัวคุณเพื่อความปลอดภัยของบัญชีผู้ใช้นี้\r\n        </h6>\r\n        <hr />\r\n        <div class=\"row\">\r\n          <div class=\"col-8 boxData\">\r\n            <div class=\"boxInput\">\r\n              <div class=\"input-group row\">\r\n                <div class=\"col-3\">\r\n                  <span class=\"input-group-text\">ชื่อ</span>\r\n                </div>\r\n                <div class=\"col-9\">\r\n                  <div class=\"group col-6 m-0 p-0\">\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"name\"\r\n                      class=\"m-0 p-0\"\r\n                      v-model=\"name\"\r\n                    />\r\n                    <span class=\"highlight\"></span>\r\n                    <span class=\"bar\"></span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"input-group row\">\r\n                <div class=\"col-3\">\r\n                  <span class=\"input-group-text\">สกุล</span>\r\n                </div>\r\n                <div class=\"col-9\">\r\n                  <div class=\"group col-6 m-0 p-0\">\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"name\"\r\n                      class=\"m-0 p-0\"\r\n                      v-model=\"last\"\r\n                    />\r\n                    <span class=\"highlight\"></span>\r\n                    <span class=\"bar\"></span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"input-group row\">\r\n                <div class=\"col-3\">\r\n                  <span class=\"input-group-text\">E-Mail</span>\r\n                </div>\r\n                <div class=\"col-9\">\r\n                  <div class=\"group col-6 m-0 p-0\">\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"name\"\r\n                      class=\"m-0 p-0\"\r\n                      v-model=\"email\"\r\n                      readonly\r\n                    />\r\n                    <span class=\"highlight\"></span>\r\n                    <span class=\"bar\"></span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"input-group row\">\r\n                <div class=\"col-3\">\r\n                  <span class=\"input-group-text\">หมายเลขโทรศัพท์</span>\r\n                </div>\r\n                <div class=\"col-9\">\r\n                  <div class=\"group col-6 m-0 p-0\">\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"name\"\r\n                      class=\"m-0 p-0\"\r\n                      v-model=\"phone\"\r\n                    />\r\n                    <span class=\"highlight\"></span>\r\n                    <span class=\"bar\"></span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"input-group row d-flex align-items-center\">\r\n                <div class=\"col-3\">\r\n                  <span class=\"input-group-text\">เพศ</span>\r\n                </div>\r\n                <div class=\"col-9\">\r\n                  <div class=\"p-1\">\r\n                    <div class=\"form-check form-check-inline ml-auto\">\r\n                      <input\r\n                        class=\"form-check-input\"\r\n                        type=\"radio\"\r\n                        name=\"inlineRadioOptions\"\r\n                        id=\"inlineRadio1\"\r\n                        value=\"1\"\r\n                        v-model=\"gender\"\r\n                      />\r\n                      <label class=\"form-check-label\" for=\"inlineRadio1\"\r\n                        >ชาย</label\r\n                      >\r\n                    </div>\r\n                    <div class=\"form-check form-check-inline\">\r\n                      <input\r\n                        class=\"form-check-input\"\r\n                        type=\"radio\"\r\n                        name=\"inlineRadioOptions\"\r\n                        id=\"inlineRadio2\"\r\n                        value=\"2\"\r\n                        v-model=\"gender\"\r\n                      />\r\n                      <label class=\"form-check-label\" for=\"inlineRadio2\"\r\n                        >หญิง</label\r\n                      >\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"input-group row\">\r\n                <div class=\"col-3\">\r\n                  <span class=\"input-group-text\">วัน/เดือน/ปี เกิด </span>\r\n                </div>\r\n                <div class=\"col-9\">\r\n                  <Date @getDay=\"getDay\" :day=\"birthday\" />\r\n                </div>\r\n              </div>\r\n              <div class=\"col-9 ms-auto\">\r\n                <button class=\"btn mt-4 rounded-pill\" @click=\"submit\">\r\n                  บันทึก\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col-4 text-center\">\r\n            <form ref=\"formImg\">\r\n              <div class=\"BoximgProfile mx-auto\">\r\n                <img :src=\"url\" alt=\"\" class=\"rounded-circle\" />\r\n              </div>\r\n\r\n              <div class=\"text-center mt-2\">\r\n                <label for=\"file-upload\" class=\"custom-file-upload\">\r\n                  <i class=\"fas fa-image\"></i> เลือกรูป\r\n                </label>\r\n                <input\r\n                  id=\"file-upload\"\r\n                  name=\"img\"\r\n                  ref=\"img\"\r\n                  type=\"file\"\r\n                  accept=\"image/*\"\r\n                  @change=\"onFileChange\"\r\n                />\r\n                <p class=\"mt-2\">ไฟล์ที่รองรับ: .JPEG, .PNG</p>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Date from \"./Date.vue\";\r\nimport axios from \"axios\";\r\nexport default {\r\n  name: \"ProfileMe\",\r\n  components: { Date },\r\n  data() {\r\n    return {\r\n      id_member: this.$session.get(\"id_member\"),\r\n      name: \"\",\r\n      last: \"\",\r\n      email: this.$session.get(\"email\"),\r\n      phone: \"\",\r\n      gender: \"\",\r\n      birthday: \"\",\r\n      url: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    onFileChange(e) {\r\n      const file = e.target.files[0];\r\n      const typeImg = \"|jpg|png|jpeg\";\r\n      const type = file.type.split(\"/\");\r\n      if (file && typeImg.indexOf(type[1]) !== -1) {\r\n        this.url = URL.createObjectURL(file);\r\n        console.log(\"Success\");\r\n        console.log(this.$refs.img.value);\r\n      } else {\r\n        this.$swal({\r\n          position: \"center\",\r\n          icon: \"error\",\r\n          title: \"ผิดผลาด\",\r\n          text: \"รองรับไฟล์: .JPEG, .PNG เท่านั้น\",\r\n          showCancelButton: false,\r\n          confirmButtonText: \"ตกลง\",\r\n          confirmButtonColor: \"#EB4247\",\r\n        }).then(() => {\r\n          this.$refs.img.value = null;\r\n          this.getData();\r\n        });\r\n      }\r\n    },\r\n\r\n    getDay(date) {\r\n      this.birthday = date;\r\n    },\r\n    submit() {\r\n      axios\r\n        .post(`${this.$URL}/User/member.php`, {\r\n          action: \"update\",\r\n          id_member: this.id_member,\r\n          firstname: this.name,\r\n          lastname: this.last,\r\n          phone: this.phone,\r\n          gender: this.gender,\r\n          birthday: this.birthday,\r\n        })\r\n        .then(() => {\r\n          this.$swal({\r\n            position: \"center\",\r\n            icon: \"success\",\r\n            title: \"อัปเดตข้อมูลสำเร็จ\",\r\n            showConfirmButton: false,\r\n            timer: 1500,\r\n          });\r\n        });\r\n      this.uploadImg();\r\n    },\r\n    getData() {\r\n      axios\r\n        .post(`${this.$URL}/User/member.php`, {\r\n          action: \"getData\",\r\n          id_member: this.id_member,\r\n        })\r\n        .then((res) => {\r\n          this.name = res.data.firstname;\r\n          this.last = res.data.lastname;\r\n          this.phone = res.data.phone;\r\n          this.gender = res.data.gender;\r\n          this.birthday = res.data.birthday;\r\n          this.url = `${this.$URL}/img/${res.data.img}`;\r\n          this.$emit(\"getImg\", `${this.$URL}/img/${res.data.img}`);\r\n          if (\r\n            this.url == `${this.$URL}/img/undefined` ||\r\n            this.url == `${this.$URL}/img/null`\r\n          ) {\r\n            this.url = `${this.$URL}/img/preview.png`;\r\n          }\r\n          this.$root.$emit(\"getImg\");\r\n        });\r\n    },\r\n    uploadImg() {\r\n      const fromData = new FormData(this.$refs[\"formImg\"]);\r\n      for (let key in fromData.entries()) {\r\n        fromData.append(key, fromData[key]);\r\n      }\r\n      fromData.append(\"id_member\", this.$session.get(\"id_member\"));\r\n      fromData.append(\"action\", \"uploadImg\");\r\n\r\n      axios\r\n        .post(`${this.$URL}/User/member.php`, fromData)\r\n        .then(() => {\r\n          this.getData();\r\n          this.$refs.img.value = null;\r\n        })\r\n        .then(() => {\r\n          this.$root.$emit(\"setProfile\");\r\n        });\r\n    },\r\n  },\r\n  mounted() {\r\n    this.getData();\r\n    this.$root.$emit(\"setProfile\");\r\n    this.$root.$emit(\"Profile\");\r\n    document.title = \"Pepensuda Shop Profile\";\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import \"../../assets/css/input.css\";\r\n.box {\r\n  background-color: #ffffff;\r\n  border: 0.01rem solid #940b01;\r\n  border-radius: 0.5rem;\r\n  overflow: hidden;\r\n  padding: 1.3rem 0.5rem;\r\n  margin-top: 0.5rem;\r\n}\r\n.input-group-text {\r\n  background: none;\r\n  border: none;\r\n}\r\n.input-group {\r\n  margin-top: 0.4rem;\r\n}\r\n.boxInput {\r\n  width: 43rem;\r\n}\r\nspan {\r\n  font-size: 1.1rem;\r\n}\r\n.boxImg {\r\n  width: 20rem;\r\n  height: 20rem;\r\n  margin: 0 auto;\r\n}\r\n.boxImg img {\r\n  width: 10rem;\r\n  height: 10rem;\r\n  margin: 0 auto;\r\n  border: 0.01rem solid black;\r\n  object-fit: cover;\r\n}\r\n\r\ninput[type=\"file\"] {\r\n  display: none;\r\n}\r\n.custom-file-upload {\r\n  border: 1px solid #ccc;\r\n  display: inline-block;\r\n  padding: 0.5rem 0.9rem;\r\n  cursor: pointer;\r\n}\r\np {\r\n  font-size: 0.9rem;\r\n}\r\ninput[type=\"radio\"]:checked {\r\n  border: none;\r\n  background-color: red;\r\n}\r\nbutton {\r\n  width: 10rem;\r\n  background-color: #c5604e;\r\n  color: white;\r\n}\r\nbutton:hover {\r\n  color: #ffffff;\r\n  background-color: #efb1a2;\r\n}\r\n.BoximgProfile {\r\n  width: 10rem;\r\n  height: 10rem;\r\n}\r\n.BoximgProfile img {\r\n  width: 10rem;\r\n  height: 10rem;\r\n  margin: 0 auto;\r\n  display: block;\r\n  object-fit: cover;\r\n  object-position: center;\r\n}\r\n.boxData {\r\n  border-right: 0.01rem solid #ccc;\r\n}\r\n</style>\r\n"]}]}